#include <bits/stdc++.h>

using namespace std;

#define ll long long
#define e cout << endl
#define pb push_back 

using namespace std;

int main ()
{
	int tt , x; cin >> tt;
	string s ; 
	deque<int> q ; 
	while(tt--) {
		 cin >> s;
		 if(s == "PUSHFRONT") {
		 	cin >> x ; 
			 q.push_front(x); 
		 } 
		 else if(s == "PUSHBACK") {
		 	cin >> x ; 
		 	q.push_back(x); 
		 } 
		 else if(s == "PRINTFRONT") {
		 	if(!q.empty()) {
				 cout << q.front() << endl ;  
			 } else cout << "NONE\n" ; 
		 } 
		 else if(s == "PRINTBACK") {
		 	if(!q.empty()) {
				 cout << q.back() << endl ;  
			 } else cout << "NONE\n"; 
		 }
		 else if(s == "POPFRONT") {
		 	if(!q.empty()) {
		 		q.pop_front(); 
			 }
		 } 
		 else if(s == "POPBACK") {
		 	if(!q.empty()) {
		 		q.pop_back(); 
			 } 
		 } 
	} 
}
